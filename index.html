<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

        <title>COMP3612 Assignment 2</title>

        <!-- Font Awesome -->
        <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel='stylesheet'> -->
        <!-- Font -->
        <link href="https://fonts.googleapis.com/css2?family=Nova+Mono&family=Oswald:wght@200..700&display=swap" rel="stylesheet">
        <style type="text/tailwindcss">
            /* Global Styles */
            :root {
                font-family: 'Oswald', sans-serif;
            }

            /* Tailwind Variables */
            @theme {

            }

            @layer components {
                .link {
                    @apply hover:underline hover:cursor-pointer;
                }
            }

        </style>
        <script src="index.js" type="module"></script>
        <script>
            // Test scripts
            
            document.addEventListener("DOMContentLoaded", () => {
                // this listener should be a parent event handler
                const buttons = document.querySelectorAll("header button").forEach((b) => b.addEventListener("click", route));
            });

            // Destination should be id of the "route" (as in the id of the element we are swapping to)
            // this is just simulating routing
            // this broke, fix later
            function route(e) {
                const pages = document.querySelectorAll("main > *");
                for(const page of pages) {
                    console.log(page.id, e.target.dataset.route);
                    if(page.id != e.target.dataset.route) {
                        page.classList.remove("block");
                        page.classList.add("hidden");
                    } else {
                        page.classList.remove("hidden");
                        page.classList.add("block");
                    }
                } 
            }
        </script>
    </head>
    <body>
        <header class="flex flex-row my-6 mx-16 max-w-dvw">
            <button data-route="home" class="text-4xl font-medium">Logo</button> <!-- placeholder -->
            <nav id="nav" class="text-2xl font-normal m-auto">
                <button data-route="home" class="link">Home</button> |
                <button data-route="women" class="link">Women</button> |
                <button data-route="men" class="link">Men</button> |
                <button data-route="browser" class="link">Browse</button> |
                <button data-route="about" class="link">About</button>
            </nav>

            <!-- span of this button will be changed dynamically -->
            <button data-route="cart" id="header-cart" class="link text-2xl font-normal justify-right my-auto">
                Cart <span id="cart-counter" class="text-lg my-auto px-2 bg-blue-500 border-blue-500 rounded-full">0</span>
            </button>
        </header>
        <main>
           
            <!-- Add dynamic pages/popups here as articles/dialogs -->
            <article class="block" id="home"> 
                <div id="test">

                </div>
            </article>
            <article class="hidden" id="singleproduct">
                <div class="px-6">
                    <p id="breadcrumb" class="px-2 py-4 text-md">
                        <!-- set event handlers for all of these -->
                        <button id="crumb-home" class="link underline">Home</button> >
                        <button id="crumb-gender" class="link underline">Gender</button> > <!-- Populate the route and text content with JS-->
                        <button id="crumb-category" class="link underline">Category</button> > <!-- This too -->
                        <span id="crumb-product">Product</span> <!-- This one isn't a link, just change text content-->
                    </p>
                    <div id="product" class="flex flex-row gap-6">
                        <div id="product-images" class="flex flex-col">
                            <img id="product-images-main" class="flex w-full h-2/3 mb-4">
                            <div id="product-images-sub" class="flex flex-row w-full h-1/3 gap-4 mt-4">
                                <img class="flex w-1/2">
                                <img class="flex w-1/2">
                            </div>
                        </div>
                        <div id="product-description" class="">
                            <!-- put the header for items here! -->
                        </div>
                    </div>
                </div>
            </article>
            <article class="hidden px-6" id="cart">
                <section id="cart-items" class="w-full"></section>
                <div class="flex flex-row">
                    <section id="cart-shipping" class="w-1/3 m-4">
                        <h2 class="mx-4 text-xl">Shipping</h2>
                        <form class="border p-4 flex flex-col">
                            <select name="type" id="shipping-type" class="w-36 border p-2 m-2">
                                <option value="standard">Standard</option>
                                <option value="express">Express</option>
                                <option value="priority">Priority</option>
                            </select>
                            <select name="dest" id="shipping-dest" class="w-36 border p-2 m-2">
                                <option value="CA">Canada</option>
                                <option value="US">United States</option>
                                <option value="INT">International</option>
                            </select>
                        </form>
                    </section>
                    <section id="cart-summary" class="w-2/3 m-4">
                        <h2 class="mx-4 text-xl">Summary</h2>
                        <div class="border p-4">
                            <p>
                                Merchandise <span id="cart-subtotal"></span>
                            </p>
                            <p>
                                Shipping <span id="cart-shipping"></span>
                            </p>
                            <p>
                                Taxes <span id="cart-taxes"></span>
                            </p>
                            <p>
                                Total <span id="cart-total"></span>
                            </p>
                        </div>
                    </section>
                </div>
            </article>
            <article class="hidden" id="browser"></article>
            <dialog id="about"></dialog>
        </main>
        <footer>
        </footer>

        <template id="cart-item-template">
            <div class="cart-item flex flex-row">
                <button class="remove-item border bg-gray-200 px-2">-</button>
                <span class="item-name px-2"></span>
                <span class="item-color px-2"></span>
                <span class="item-size px-2"></span>
                <span class="item-price px-2"></span>
                <span class="item-quantity px-2"></span>
                <span class="item-subtotal px-2"></span>
            </div>
        </template>    
    </body>
</html>